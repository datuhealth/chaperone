(function(f){if(typeof exports==="object"&&typeof module!=="undefined"){module.exports=f()}else if(typeof define==="function"&&define.amd){define([],f)}else{var g;if(typeof window!=="undefined"){g=window}else if(typeof global!=="undefined"){g=global}else if(typeof self!=="undefined"){g=self}else{g=this}g.chaperone=f()}})(function(){var define,module,exports;return function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s}({1:[function(_dereq_,module,exports){"use strict";module.exports={options:{breakpoints:{mobile:640,tablet:1024},throbberHTML:'<span class="throbber"><span class="dot"></span></span>',chaperoneHTML:'<div class="chaperone"><div class="chaperone__header"><div class="chaperone__progress" data-hook="chaperone-progress">3 of 8</div><a href="javascript:void(0);" class="close-chaperone" data-hook="close-chaperone"><svg class="icon icon-x"><use xlink:href="#x"></svg></a></div><div class="chaperone__body" data-hook="chaperone-text"></div><div class="chaperone__controls"><a href="javascript:void(0);" class="chaperone-btn" data-hook="chaperone-back">Back</a><a href="javascript:void(0);" class="chaperone-btn chaperone-btn--next" data-hook="chaperone-next">Next</a><a href="javascript:void(0);" class="chaperone-btn chaperone-btn--finish hide" data-hook="chaperone-finish">Finish</a></div></div>',pageContainerSelector:".container",progressSelector:'[data-hook="chaperone-progress"]',textSelector:'[data-hook="chaperone-text"]',backSelector:'[data-hook="chaperone-back"]',nextSelector:'[data-hook="chaperone-next"]',finishSelector:'[data-hook="chaperone-finish"]',finishCallback:function(){return},animationTime:300,cycle:false,autoStart:true,steps:[{position:"fixed",location:"windowMiddle",title:"Welcome to Chaperone.",message:"Add some more steps already!"}]},init:function initializeTour(tour){var self=this;document.documentElement.scrollTop=1;this.documentElement=document.documentElement.scrollTop===1?document.documentElement:document.body;if("ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch){document.body.style.cursor="pointer"}if(tour instanceof Object){for(var option in tour){if(window.Object.hasOwnProperty.call(tour,option)&&window.Object.hasOwnProperty.call(this.options,option)){if(typeof tour[option]==="object"&&!Array.isArray(tour[option])){for(var subkey in tour[option]){if(window.Object.hasOwnProperty.call(tour[option],subkey)&&window.Object.hasOwnProperty.call(this.options[option],subkey)){this.options[option][subkey]=tour[option][subkey]}}}else{this.options[option]=tour[option]}}}}self.clickHandler=function clickHandler(evt){if(!evt){evt=window.event}var trigger=evt.target||evt.srcElement,stepId,finishClose;if(self.hasClass(trigger,"dot")||self.hasClass(trigger,"close")){trigger=trigger.parentNode}stepId=trigger.getAttribute("data-stepid");finishClose=trigger.matches(self.options.finishSelector)||trigger.matches('[data-hook="close-chaperone"]');if(stepId){if(self.currentStep){if(trigger===self.currentStep||trigger===self.currentTrigger){return}else{var children=self.currentStep.childNodes;for(var childNode in children){if(window.Object.hasOwnProperty(children,childNode)){if(children[childNode]===trigger){return}}}self.close()}}self.currentTrigger=trigger;setTimeout(function(){self.open(stepId)},self.options.animationTime)}if(finishClose){self.close();self.currentStep=null;self.endTour()}};this.windowChangeHandler=function windowChangeHandler(){return};this.placeSteps(self.options.steps);this.addEventListener(document.body,"click",self.clickHandler);this.addEventListener(window,"resize",this.windowChangeHandler)},placeSteps:function placeSteps(steps){var self=this,currentSize=self.getCurrentScreenSize();self.shownSteps=steps.filter(function(step){var hasCurrentSize;if(step.shownOn){hasCurrentSize=self.arrayContains(step.shownOn,currentSize)}else{hasCurrentSize=true}return hasCurrentSize});self.shownSteps.forEach(function(step,i){var throbber=self.createDOMElement(self.options.throbberHTML),target=step.target?document.body.querySelector(step.target):document.body,location=step.location,targetPosLeft=self.getOffset(target).left,targetPosTop=step.position==="fixed"?target.offsetTop:self.getOffset(target).top,targetPosBottom=targetPosTop+target.getBoundingClientRect().height,targetPosVertMiddle=targetPosTop+target.getBoundingClientRect().height/2,targetPosCenter=targetPosLeft+target.getBoundingClientRect().width/2,targetZindex=step.zIndex||parseInt(self.getZindex(target))+1,windowPosVertMiddle=window.innerHeight/2,windowPosCenter=window.innerWidth/2;self.addClass(self.options.pageContainerSelector?document.body.querySelector(self.options.pageContainerSelector):document.body,"chaperone-active");throbber.setAttribute("data-stepid",i);if(step.position==="locked"){throbber.style.position="absolute";throbber.style.marginTop=step.lockedTop+"px";throbber.style.marginLeft=step.lockedLeft+"px"}else{throbber.style.position=step.position||"absolute"}throbber.style.zIndex=targetZindex;switch(location){case"bottomMiddle":throbber.style.left=targetPosCenter+"px";throbber.style.top=targetPosBottom+"px";break;case"centerMiddle":throbber.style.left=targetPosCenter+"px";throbber.style.top=targetPosVertMiddle+"px";break;case"windowMiddle":throbber.style.zIndex=1e3;throbber.style.left=windowPosCenter+"px";throbber.style.top=windowPosVertMiddle+"px";break}if(step.position==="locked"){target.insertAdjacentHTML("afterend",throbber.outerHTML)}else{document.body.appendChild(throbber)}});if(self.options.autoStart){self.open(0)}},open:function openStep(stepId){var self=this,stepIndex=parseInt(stepId),step=self.shownSteps[stepIndex],stepTitle=step.title,stepText=step.message,stepNumber=parseInt(stepIndex+1),stepsTotal=self.shownSteps.length,currentThrobber=document.body.querySelector('[data-stepid="'+stepId+'"]'),chaperone=self.createDOMElement(self.options.chaperoneHTML),stepTextContainer,titleContainer,progressContainer,nextBtn,backBtn,finishBtn,currentElement,targetPosTop,chaperoneHeight;if(step.target){currentElement=document.body.querySelector(step.target);targetPosTop=Math.round(currentElement.offsetTop-screen.height/1.5)}if(step.position!=="fixed"){console.log(targetPosTop);self.scrollTo(document.body,targetPosTop,self.options.animationTime)}self.addClass(currentThrobber,"active");document.body.appendChild(chaperone);chaperoneHeight=chaperone.offsetHeight;setTimeout(function(){progressContainer=document.body.querySelector(self.options.progressSelector);stepTextContainer=document.body.querySelector(self.options.textSelector);titleContainer=document.body.querySelector('[data-hook="chaperone-title"]');nextBtn=document.body.querySelector(self.options.nextSelector);backBtn=document.body.querySelector(self.options.backSelector);finishBtn=document.body.querySelector(self.options.finishSelector);progressContainer.innerText=stepNumber+" of "+stepsTotal;if(stepTitle){titleContainer.innerText=stepTitle}stepTextContainer.innerText=stepText;nextBtn.setAttribute("data-stepid",parseInt(stepIndex+1));backBtn.setAttribute("data-stepid",parseInt(stepIndex-1));self.addClass(chaperone,"active");if(stepNumber===1){self.addClass(backBtn,"chaperone-disabled")}if(stepNumber===stepsTotal){self.addClass(nextBtn,"hide");self.removeClass(finishBtn,"hide")}if(step.openEvent){step.openEvent()}},10);self.currentStep=stepNumber},close:function closeStep(){var self=this,currentChaperone=document.body.querySelector(".chaperone"),activeThrobber=document.body.querySelector(".throbber.active"),activeIndex=activeThrobber.getAttribute("data-stepid");if(activeThrobber){self.removeClass(activeThrobber,"active")}if(self.shownSteps[activeIndex].closeEvent){self.shownSteps[activeIndex].closeEvent()}if(currentChaperone){self.removeClass(currentChaperone,"active");setTimeout(function(){currentChaperone.parentNode.removeChild(currentChaperone)},self.options.animationTime)}self.currentStep=null},endTour:function endTour(){"use strict";var self=this,throbbers=Array.prototype.slice.call(document.body.querySelectorAll(".throbber"));throbbers.forEach(function(throbber){throbber.parentNode.removeChild(throbber)});self.removeClass(self.options.pageContainerSelector?document.body.querySelector(self.options.pageContainerSelector):document.body,"chaperone-active")},addEventListener:function addEventListener(el,eventName,handler,useCapture){if(!useCapture){useCapture=false}if(el.addEventListener){el.addEventListener(eventName,handler,useCapture);return el}else{if(eventName==="focus"){eventName="focusin"}el.attachEvent("on"+eventName,function(){handler.call(el)});return el}},removeEventListener:function removeEventListener(el,eventName,handler,useCapture){if(!useCapture){useCapture=false}if(!el){return}if(el.removeEventListener){el.removeEventListener(eventName,handler,useCapture)}else{if(eventName==="focus"){eventName="focusin"}el.detachEvent("on"+eventName,function(){handler.call(el)})}return el},hasClass:function hasClass(el,className){if(el.classList){return el.classList.contains(className)}else{return new RegExp("(^| )"+className+"( |$)","gi").test(el.className)}},addClass:function addClass(el,className){if(el.classList){el.classList.add(className)}else{el.className+=" "+className}return el},removeClass:function removeClass(el,className){if(el){if(el.classList){el.classList.remove(className)}else{el.className=el.className.replace(new RegExp("(^|\\b)"+className.split(" ").join("|")+"(\\b|$)","gi")," ")}}return el},setInnerText:function setInnerText(el,text){if(el.textContent!==undefined){el.textcontent=text}else{el.innerText=text}return el},createDOMElement:function createDOMElement(html){var div=document.createElement("div");div.innerHTML=html;return div.firstChild},getOffset:function getOffset(el){var rect=el.getBoundingClientRect(),scrollLeft=window.pageXOffset||document.documentElement.scrollLeft,scrollTop=window.pageYOffset||document.documentElement.scrollTop;return{top:rect.top+scrollTop,left:rect.left+scrollLeft}},getZindex:function getZindex(e){var self=this,z,dv=document.defaultView||window;if(dv.getComputedStyle){z=dv.getComputedStyle(e).getPropertyValue("z-index")}else{z=e.currentStyle.zindex}if(isNaN(z)){return self.getZindex(e.parentNode)}return z},scrollTo:function scrollTo(element,to,duration){if(duration<0){return}var difference=to-element.scrollTop,perTick=difference/duration*10;setTimeout(function(){element.scrollTop=element.scrollTop+perTick;if(element.scrollTop===to){return}scrollTo(element,to,duration-10)},10)},arrayContains:function arrayContains(a,obj){var i=a.length;while(i--){if(a[i]===obj){return true}}return false},getCurrentScreenSize:function getCurrentScreenSize(){var self=this,currentSize;if(document.documentElement.clientWidth<self.options.breakpoints.mobile){currentSize="mobile"}else if(document.documentElement.clientWidth>self.options.breakpoints.mobile&&document.documentElement.clientWidth<self.options.breakpoints.tablet){currentSize="tablet"}else{currentSize="desktop"}return currentSize}}},{}]},{},[1])(1)});
